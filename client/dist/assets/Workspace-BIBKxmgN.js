import{r as c,d as U,R as Ie,K as kr,M as et,k as xe,f as Zt,m as er,h as tr,N as tt,O as Hr,l as rr,P as qr,e as Z,Q as nr,i as sr,T as xt,_ as Ne,C as or,o as ir,F as Nt,D as zr,U as Pt,z as Br,j as I,W as Wr,b as Ee}from"./index-DinWDTD4.js";import{I as me,o as Pe,T as ar,R as Xr,S as Gr,A as Vr,Q as Yr,K as Kr,U as Qr,k as Jr,M as Zr,X as en,m as tn,n as rn,B as Re,x as Rt,b as nn,w as sn,D as Lt,v as Xe,C as De,Y as Ge,O as on,s as de}from"./index-DnKkT7qR.js";var an={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function rt(){return rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rt.apply(this,arguments)}const cn=(t,e)=>c.createElement(me,rt({},t,{ref:e,icon:an})),ln=c.forwardRef(cn);var un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nt.apply(this,arguments)}const dn=(t,e)=>c.createElement(me,nt({},t,{ref:e,icon:un})),fn=c.forwardRef(dn);var pn={icon:function(e,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:r}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},st.apply(this,arguments)}const gn=(t,e)=>c.createElement(me,st({},t,{ref:e,icon:pn})),hn=c.forwardRef(gn);var mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ot.apply(this,arguments)}const yn=(t,e)=>c.createElement(me,ot({},t,{ref:e,icon:mn})),vn=c.forwardRef(yn);var bn={icon:function(e,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:r}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:r}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:r}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},it.apply(this,arguments)}const Sn=(t,e)=>c.createElement(me,it({},t,{ref:e,icon:bn})),wn=c.forwardRef(Sn);var En={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function at(){return at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},at.apply(this,arguments)}const Dn=(t,e)=>c.createElement(me,at({},t,{ref:e,icon:En})),Cn=c.forwardRef(Dn),$n={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,railColor:"#D9D9D9",railWidth:1,gapPosition:"bottom",loading:!1},On=()=>{const t=c.useRef([]),e=c.useRef(null);return c.useEffect(()=>{const r=Date.now();let n=!1;t.current.forEach(s=>{if(!s)return;n=!0;const o=s.style;o.transitionDuration=".3s, .3s, .3s, .06s",e.current&&r-e.current<100&&(o.transitionDuration="0s, 0s")}),n&&(e.current=Date.now())}),t.current},jt=({bg:t,children:e})=>c.createElement("div",{style:{width:"100%",height:"100%",background:t}},e);function Mt(t,e){return Object.keys(t).map(r=>{const n=parseFloat(r),s=`${Math.floor(n*e)}%`;return`${t[r]} ${s}`})}const Tn=c.forwardRef((t,e)=>{const{prefixCls:r,color:n,gradientId:s,radius:o,className:a,style:i,ptg:l,strokeLinecap:u,strokeWidth:d,size:p,gapDegree:g}=t,f=n&&typeof n=="object",m=f?"#FFF":void 0,h=p/2,v=c.createElement("circle",{className:U(`${r}-circle-path`,a),r:o,cx:h,cy:h,stroke:m,strokeLinecap:u,strokeWidth:d,opacity:l===0?0:1,style:i,ref:e});if(!f)return v;const E=`${s}-conic`,y=g?`${180+g/2}deg`:"0deg",D=Mt(n,(360-g)/360),C=Mt(n,1),w=`conic-gradient(from ${y}, ${D.join(", ")})`,b=`linear-gradient(to ${g?"bottom":"top"}, ${C.join(", ")})`;return c.createElement(c.Fragment,null,c.createElement("mask",{id:E},v),c.createElement("foreignObject",{x:0,y:0,width:p,height:p,mask:`url(#${E})`},c.createElement(jt,{bg:b},c.createElement(jt,{bg:w}))))}),ve=100,Ve=(t,e,r,n,s,o,a,i,l,u,d=0)=>{const p=r/100*360*((360-o)/360),g=o===0?0:{bottom:0,top:180,left:90,right:-90}[a];let f=(100-n)/100*e;l==="round"&&n!==100&&(f+=u/2,f>=e&&(f=e-.01));const m=ve/2;return{stroke:typeof i=="string"?i:void 0,strokeDasharray:`${e}px ${t}`,strokeDashoffset:f+d,transform:`rotate(${s+p+g}deg)`,transformOrigin:`${m}px ${m}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},In=(({id:t,loading:e})=>{if(!e)return{indeterminateStyleProps:{},indeterminateStyleAnimation:null};const r=`${t}-indeterminate-animate`;return{indeterminateStyleProps:{transform:"rotate(0deg)",animation:`${r} 1s linear infinite`},indeterminateStyleAnimation:Ie.createElement("style",null,`@keyframes ${r} {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }`)}});function ct(){return ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ct.apply(this,arguments)}function Ft(t){const e=t??[];return Array.isArray(e)?e:[e]}const xn=t=>{const{id:e,prefixCls:r,classNames:n={},styles:s={},steps:o,strokeWidth:a,railWidth:i,gapDegree:l=0,gapPosition:u,railColor:d,strokeLinecap:p,style:g,className:f,strokeColor:m,percent:h,loading:v,...E}={...$n,...t},y=ve/2,D=kr(e),C=`${D}-gradient`,w=y-a/2,b=Math.PI*2*w,P=l>0?90+l/2:-90,$=b*((360-l)/360),{count:L,gap:R}=typeof o=="object"?o:{count:o,gap:2},k=Ft(h),V=Ft(m),J=V.find(B=>B&&typeof B=="object"),O=J&&typeof J=="object"?"butt":p,{indeterminateStyleProps:ee,indeterminateStyleAnimation:ie}=In({id:D,loading:v}),oe=Ve(b,$,0,100,P,l,u,d,O,a),z=On(),K=()=>{let B=0;return k.map((F,G)=>{const S=V[G]||V[V.length-1],A=Ve(b,$,B,F,P,l,u,S,O,a);return B+=F,c.createElement(Tn,{key:G,color:S,ptg:F,radius:w,prefixCls:r,gradientId:C,className:n.track,style:{...A,...ee,...s.track},strokeLinecap:O,strokeWidth:a,gapDegree:l,ref:M=>{z[G]=M},size:ve})}).reverse()},Q=()=>{const B=Math.round(L*(k[0]/100)),F=100/L;let G=0;return new Array(L).fill(null).map((S,A)=>{const M=A<=B-1?V[0]:d,H=M&&typeof M=="object"?`url(#${C})`:void 0,ne=Ve(b,$,G,F,P,l,u,M,"butt",a,R);return G+=($-ne.strokeDashoffset+R)*100/$,c.createElement("circle",{key:A,className:U(`${r}-circle-path`,n.track),r:w,cx:y,cy:y,stroke:H,strokeWidth:a,opacity:1,style:{...ne,...s.track},ref:se=>{z[A]=se}})})};return c.createElement("svg",ct({className:U(`${r}-circle`,n.root,f),viewBox:`0 0 ${ve} ${ve}`,style:{...s.root,...g},id:e,role:"presentation"},E),!L&&c.createElement("circle",{className:U(`${r}-circle-rail`,n.rail),r:w,cx:y,cy:y,stroke:d,strokeLinecap:O,strokeWidth:i||a,style:{...oe,...s.rail}}),L?Q():K(),ie)};function fe(t){return!t||t<0?0:t>100?100:t}function Le({success:t}){let e;return t&&"percent"in t&&(e=t.percent),e}const Nn=({percent:t,success:e})=>{const r=fe(Le({success:e}));return[r,fe(fe(t)-r)]},Pn=({success:t={},strokeColor:e})=>{const{strokeColor:r}=t;return[r||et.green,e||null]},Me=(t,e,r)=>{let n=-1,s=-1;if(e==="step"){const o=r.steps,a=r.strokeWidth;typeof t=="string"||typeof t>"u"?(n=t==="small"?2:14,s=a??8):typeof t=="number"?[n,s]=[t,t]:[n=14,s=8]=Array.isArray(t)?t:[t.width,t.height],n*=o}else if(e==="line"){const o=r?.strokeWidth;typeof t=="string"||typeof t>"u"?s=o||(t==="small"?6:8):typeof t=="number"?[n,s]=[t,t]:[n=-1,s=8]=Array.isArray(t)?t:[t.width,t.height]}else(e==="circle"||e==="dashboard")&&(typeof t=="string"||typeof t>"u"?[n,s]=t==="small"?[60,60]:[120,120]:typeof t=="number"?[n,s]=[t,t]:Array.isArray(t)&&(n=t[0]??t[1]??120,s=t[0]??t[1]??120));return[n,s]},Rn=3,Ln=t=>Rn/t*100,At=["root","body","indicator"],jn=t=>{const{prefixCls:e,classNames:r,styles:n,railColor:s,trailColor:o,strokeLinecap:a="round",gapPosition:i,gapPlacement:l,gapDegree:u,width:d=120,type:p,children:g,success:f,size:m=d,steps:h}=t,{direction:v}=xe("progress"),E=s??o,[y,D]=Me(m,"circle");let{strokeWidth:C}=t;C===void 0&&(C=Math.max(Ln(y),6));const w={width:y,height:D,fontSize:y*.15+6},b=c.useMemo(()=>{if(u||u===0)return u;if(p==="dashboard")return 75},[u,p]),P=Nn(t),$=c.useMemo(()=>{const O=(l??i)||p==="dashboard"&&"bottom"||void 0,ee=v==="rtl";switch(O){case"start":return ee?"right":"left";case"end":return ee?"left":"right";default:return O}},[v,l,i,p]),L=Object.prototype.toString.call(t.strokeColor)==="[object Object]",R=Pn({success:f,strokeColor:t.strokeColor}),k=U(`${e}-body`,{[`${e}-circle-gradient`]:L},r.body),V=c.createElement(xn,{steps:h,percent:h?P[1]:P,strokeWidth:C,railWidth:C,strokeColor:h?R[1]:R,strokeLinecap:a,railColor:E,prefixCls:e,gapDegree:b,gapPosition:$,classNames:Pe(r,At),styles:Pe(n,At)}),J=y<=20,Y=c.createElement("div",{className:k,style:{...w,...n.body}},V,!J&&g);return J?c.createElement(ar,{title:g},Y):Y},lt="--progress-line-stroke-color",Mn=t=>{const e="-100%";return new tt("antProgressLTRActive",{"0%":{transform:`translateX(${e}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${e}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Fn=t=>{const{componentCls:e,iconCls:r}=t;return{[e]:{...tr(t),display:"inline-flex","&-rtl":{direction:"rtl"},[`${e}-indicator`]:{color:t.colorText,lineHeight:1,whiteSpace:"nowrap",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:t.fontSize}},[`&${e}-status-exception`]:{[`${e}-indicator`]:{color:t.colorError}},[`&${e}-status-success`]:{[`${e}-indicator`]:{color:t.colorSuccess}}}}},An=t=>{const{componentCls:e}=t;return{[`${e}-line`]:{position:"relative",width:"100%",fontSize:t.fontSize,[`${e}-body`]:{display:"inline-flex",alignItems:"center",width:"100%",gap:t.marginXS},[`${e}-rail`]:{flex:"auto",background:t.remainingColor,borderRadius:t.lineBorderRadius,position:"relative",width:"100%"},[`&${e}-status-active`]:{[`${e}-track:after`]:{content:'""',position:"absolute",inset:0,backgroundColor:t.colorBgContainer,borderRadius:"inherit",opacity:0,animationName:Mn(),animationDuration:t.progressActiveMotionDuration,animationTimingFunction:t.motionEaseOutQuint,animationIterationCount:"infinite"}},[`${e}-track`]:{position:"absolute",insetInlineStart:0,insetBlock:0,borderRadius:"inherit",background:t.defaultColor,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,minWidth:"max-content",display:"flex",alignItems:"center","&-success":{background:t.colorSuccess}},[`&${e}-status-exception`]:{[`${e}-track`]:{background:t.colorError}},[`&${e}-status-success`]:{[`${e}-track`]:{background:t.colorSuccess}},[`${e}-indicator-outer`]:{[`&${e}-indicator-start`]:{order:-1}},[`${e}-body-layout-bottom`]:{flexDirection:"column",alignItems:"center",gap:t.marginXXS},[`${e}-indicator${e}-indicator-inner`]:{color:t.colorWhite,paddingInline:t.paddingXXS,width:"100%",display:"flex",justifyContent:"center",[`&${e}-indicator-end`]:{justifyContent:"end"},[`&${e}-indicator-start`]:{justifyContent:"start"},[`&${e}-indicator-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}}},_n=t=>{const{componentCls:e,iconCls:r}=t;return{[`${e}-circle`]:{[`${e}-circle-rail`]:{stroke:t.remainingColor},[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.defaultColor}},[`${e}-body`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`${e}-indicator`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:t.circleTextColor,fontSize:t.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:t.circleIconFontSize}},[`&${e}-status-exception`]:{[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorError}}},[`&${e}-status-success`]:{[`${e}-body:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorSuccess}}}},[`${e}-inline-circle`]:{lineHeight:1,[`${e}-inner`]:{verticalAlign:"bottom"}}}},Un=t=>{const{componentCls:e}=t;return{[e]:{[`${e}-steps`]:{display:"inline-block","&-body":{display:"flex",flexDirection:"row",alignItems:"center",gap:t.progressStepMarginInlineEnd,[`${e}-indicator`]:{marginInlineStart:t.marginXS}},"&-item":{flexShrink:0,minWidth:t.progressStepMinWidth,backgroundColor:t.remainingColor,transition:`all ${t.motionDurationSlow}`,"&-active":{backgroundColor:t.defaultColor}}}}}},kn=t=>{const{componentCls:e,iconCls:r}=t;return{[e]:{[`${e}-small&-line, ${e}-small&-line ${e}-indicator ${r}`]:{fontSize:t.fontSizeSM}}}},Hn=t=>({circleTextColor:t.colorText,defaultColor:t.colorInfo,remainingColor:t.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${t.fontSize/t.fontSizeSM}em`}),qn=Zt("Progress",t=>{const e=t.calc(t.marginXXS).div(2).equal(),r=er(t,{progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[Fn(r),An(r),_n(r),Un(r),kn(r)]},Hn),zn=t=>{let e=[];return Object.keys(t).forEach(r=>{const n=Number.parseFloat(r.replace(/%/g,""));Number.isNaN(n)||e.push({key:n,value:t[r]})}),e=e.sort((r,n)=>r.key-n.key),e.map(({key:r,value:n})=>`${n} ${r}%`).join(", ")},Bn=(t,e)=>{const{from:r=et.blue,to:n=et.blue,direction:s=e==="rtl"?"to left":"to right",...o}=t;if(Object.keys(o).length!==0){const i=zn(o),l=`linear-gradient(${s}, ${i})`;return{background:l,[lt]:l}}const a=`linear-gradient(${s}, ${r}, ${n})`;return{background:a,[lt]:a}},Wn=t=>{const{prefixCls:e,classNames:r,styles:n,direction:s,percent:o,size:a,strokeWidth:i,strokeColor:l,strokeLinecap:u="round",children:d,railColor:p,trailColor:g,percentPosition:f,success:m}=t,{align:h,type:v}=f,E=p??g,y=u==="square"||u==="butt"?0:void 0,D=a??[-1,i||(a==="small"?6:8)],[C,w]=Me(D,"line",{strokeWidth:i}),b={backgroundColor:E||void 0,borderRadius:y,height:w},P=`${e}-track`,$=l&&typeof l!="string"?Bn(l,s):{[lt]:l,background:l},L={width:`${fe(o)}%`,height:w,borderRadius:y,...$},R=Le(t),k={width:`${fe(R)}%`,height:w,borderRadius:y,backgroundColor:m?.strokeColor};return c.createElement("div",{className:U(`${e}-body`,r.body,{[`${e}-body-layout-bottom`]:h==="center"&&v==="outer"}),style:{width:C>0?C:"100%",...n.body}},c.createElement("div",{className:U(`${e}-rail`,r.rail),style:{...b,...n.rail}},c.createElement("div",{className:U(P,r.track),style:{...L,...n.track}},v==="inner"&&d),R!==void 0&&c.createElement("div",{className:U(P,`${P}-success`,r.track),style:{...k,...n.track}})),v==="outer"&&d)},Xn=t=>{const{classNames:e,styles:r,size:n,steps:s,rounding:o=Math.round,percent:a=0,strokeWidth:i=8,strokeColor:l,railColor:u,trailColor:d,prefixCls:p,children:g}=t,f=o(s*(a/100)),h=n??[n==="small"?2:14,i],[v,E]=Me(h,"step",{steps:s,strokeWidth:i}),y=v/s,D=Array.from({length:s}),C=u??d;for(let w=0;w<s;w++){const b=Array.isArray(l)?l[w]:l;D[w]=c.createElement("div",{key:w,className:U(`${p}-steps-item`,{[`${p}-steps-item-active`]:w<=f-1},e.track),style:{backgroundColor:w<=f-1?b:C,width:y,height:E,...r.track}})}return c.createElement("div",{className:U(`${p}-steps-body`,e.body),style:r.body},D,g)},Gn=["normal","exception","active","success"],Vn=c.forwardRef((t,e)=>{const{prefixCls:r,className:n,rootClassName:s,classNames:o,styles:a,steps:i,strokeColor:l,percent:u=0,size:d="default",showInfo:p=!0,type:g="line",status:f,format:m,style:h,percentPosition:v={},...E}=t,{align:y="end",type:D="outer"}=v,C=Array.isArray(l)?l[0]:l,w=typeof l=="string"||Array.isArray(l)?l:void 0,b=c.useMemo(()=>{if(C){const M=typeof C=="string"?C:Object.values(C)[0];return new Hr(M).isLight()}return!1},[l]),P=c.useMemo(()=>{const M=Le(t);return Number.parseInt(M!==void 0?(M??0)?.toString():(u??0)?.toString(),10)},[u,t.success]),$=c.useMemo(()=>!Gn.includes(f)&&P>=100?"success":f||"normal",[f,P]),{getPrefixCls:L,direction:R,className:k,style:V,classNames:J,styles:Y}=xe("progress"),O=L("progress",r),[ee,ie]=qn(O),oe={...t,percent:u,type:g,size:d,showInfo:p,percentPosition:v},[z,K]=rr([J,o],[Y,a],{props:oe}),Q=g==="line",B=Q&&!i,F=c.useMemo(()=>{if(!p)return null;const M=Le(t);let H;const ne=m||(ae=>`${ae}%`),se=Q&&b&&D==="inner";return D==="inner"||m||$!=="exception"&&$!=="success"?H=ne(fe(u),fe(M)):$==="exception"?H=Q?c.createElement(Xr,null):c.createElement(Gr,null):$==="success"&&(H=Q?c.createElement(Vr,null):c.createElement(Yr,null)),c.createElement("span",{className:U(`${O}-indicator`,{[`${O}-indicator-bright`]:se,[`${O}-indicator-${y}`]:B,[`${O}-indicator-${D}`]:B},z.indicator),style:K.indicator,title:typeof H=="string"?H:void 0},H)},[p,u,P,$,g,O,m,Q,b,D,y,B,z.indicator,K.indicator]),G={...t,classNames:z,styles:K};let S;g==="line"?S=i?c.createElement(Xn,{...G,strokeColor:w,prefixCls:O,steps:typeof i=="object"?i.count:i},F):c.createElement(Wn,{...G,strokeColor:C,prefixCls:O,direction:R,percentPosition:{align:y,type:D}},F):(g==="circle"||g==="dashboard")&&(S=c.createElement(jn,{...G,strokeColor:C,prefixCls:O,progressStatus:$},F));const A=U(O,`${O}-status-${$}`,{[`${O}-${g==="dashboard"&&"circle"||g}`]:g!=="line",[`${O}-inline-circle`]:g==="circle"&&Me(d,"circle")[0]<=20,[`${O}-line`]:B,[`${O}-line-align-${y}`]:B,[`${O}-line-position-${D}`]:B,[`${O}-steps`]:i,[`${O}-show-info`]:p,[`${O}-${d}`]:typeof d=="string",[`${O}-rtl`]:R==="rtl"},k,n,s,z.root,ee,ie);return c.createElement("div",{ref:e,style:{...V,...K.root,...h},className:A,role:"progressbar","aria-valuenow":P,"aria-valuemin":0,"aria-valuemax":100,...Pe(E,["railColor","trailColor","strokeWidth","width","gapDegree","gapPosition","gapPlacement","strokeLinecap","success"])},S)}),Yn=((t,e)=>{if(t&&e){const r=Array.isArray(e)?e:e.split(","),n=t.name||"",s=t.type||"",o=s.replace(/\/.*$/,"");return r.some(a=>{const i=a.trim();if(/^\*(\/\*)?$/.test(a))return!0;if(i.charAt(0)==="."){const l=n.toLowerCase(),u=i.toLowerCase();let d=[u];return(u===".jpg"||u===".jpeg")&&(d=[".jpg",".jpeg"]),d.some(p=>l.endsWith(p))}return/\/\*$/.test(i)?o===i.replace(/\/.*$/,""):s===i?!0:/^\w+$/.test(i)?(qr(!1,`Upload takes an invalidate 'accept' type '${i}'.Skip for check.`),!0):!1})}return!0});function Kn(t,e){const r=`cannot ${t.method} ${t.action} ${e.status}'`,n=new Error(r);return n.status=e.status,n.method=t.method,n.url=t.action,n}function _t(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}function Ut(t){const e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),t.onProgress(o)});const r=new FormData;t.data&&Object.keys(t.data).forEach(s=>{const o=t.data[s];if(Array.isArray(o)){o.forEach(a=>{r.append(`${s}[]`,a)});return}r.append(s,o)}),t.file instanceof Blob?r.append(t.filename,t.file,t.file.name):r.append(t.filename,t.file),e.onerror=function(o){t.onError(o)},e.onload=function(){return e.status<200||e.status>=300?t.onError(Kn(t,e),_t(e)):t.onSuccess(_t(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const n=t.headers||{};return n["X-Requested-With"]!==null&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(n).forEach(s=>{n[s]!==null&&e.setRequestHeader(s,n[s])}),e.send(r),{abort(){e.abort()}}}const Qn=async(t,e)=>{const r=[],n=[];t.forEach(l=>n.push(l.webkitGetAsEntry()));async function s(l){const u=l.createReader(),d=[];for(;;){const p=await new Promise(f=>{u.readEntries(f,()=>f([]))}),g=p.length;if(!g)break;for(let f=0;f<g;f++)d.push(p[f])}return d}async function o(l){return new Promise(u=>{l.file(d=>{e(d)?(l.fullPath&&!d.webkitRelativePath&&(Object.defineProperties(d,{webkitRelativePath:{writable:!0}}),d.webkitRelativePath=l.fullPath.replace(/^\//,""),Object.defineProperties(d,{webkitRelativePath:{writable:!1}})),u(d)):u(null)})})}const a=async(l,u)=>{if(l){if(l.path="",l.isFile){const d=await o(l);d&&r.push(d)}else if(l.isDirectory){const d=await s(l);n.push(...d)}}};let i=0;for(;i<n.length;)await a(n[i]),i++;return r},Jn=+new Date;let Zn=0;function Ye(){return`rc-upload-${Jn}-${++Zn}`}function je(){return je=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},je.apply(this,arguments)}class es extends c.Component{state={uid:Ye()};reqs={};fileInput;_isMounted;filterFile=(e,r=!1)=>{const{accept:n,directory:s}=this.props;let o,a;if(typeof n=="string")a=n;else{const{filter:l,format:u}=n||{};a=u,l==="native"?o=()=>!0:o=l}return(o||(s||r?l=>Yn(l,a):()=>!0))(e)};onChange=e=>{const{files:r}=e.target,n=[...r].filter(s=>this.filterFile(s));this.uploadFiles(n),this.reset()};onClick=e=>{const r=this.fileInput;if(!r)return;const n=e.target,{onClick:s}=this.props;n&&n.tagName==="BUTTON"&&(r.parentNode.focus(),n.blur()),r.click(),s&&s(e)};onKeyDown=e=>{e.key==="Enter"&&this.onClick(e)};onDataTransferFiles=async(e,r)=>{const{multiple:n,directory:s}=this.props,o=[...e.items||[]];let a=[...e.files||[]];if((a.length>0||o.some(i=>i.kind==="file"))&&r?.(),s)a=await Qn(Array.prototype.slice.call(o),this.filterFile),this.uploadFiles(a);else{let i=[...a].filter(l=>this.filterFile(l,!0));n===!1&&(i=a.slice(0,1)),this.uploadFiles(i)}};onFilePaste=async e=>{const{pastable:r}=this.props;if(r&&e.type==="paste"){const n=e.clipboardData;return this.onDataTransferFiles(n,()=>{e.preventDefault()})}};onFileDragOver=e=>{e.preventDefault()};onFileDrop=async e=>{if(e.preventDefault(),e.type==="drop"){const r=e.dataTransfer;return this.onDataTransferFiles(r)}};componentDidMount(){this._isMounted=!0;const{pastable:e}=this.props;e&&document.addEventListener("paste",this.onFilePaste)}componentWillUnmount(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste)}componentDidUpdate(e){const{pastable:r}=this.props;r&&!e.pastable?document.addEventListener("paste",this.onFilePaste):!r&&e.pastable&&document.removeEventListener("paste",this.onFilePaste)}uploadFiles=e=>{const r=[...e],n=r.map(s=>(s.uid=Ye(),this.processFile(s,r)));Promise.all(n).then(s=>{const{onBatchStart:o}=this.props;o?.(s.map(({origin:a,parsedFile:i})=>({file:a,parsedFile:i}))),s.filter(a=>a.parsedFile!==null).forEach(a=>{this.post(a)})})};processFile=async(e,r)=>{const{beforeUpload:n}=this.props;let s=e;if(n){try{s=await n(e,r)}catch{s=!1}if(s===!1)return{origin:e,parsedFile:null,action:null,data:null}}const{action:o}=this.props;let a;typeof o=="function"?a=await o(e):a=o;const{data:i}=this.props;let l;typeof i=="function"?l=await i(e):l=i;const u=(typeof s=="object"||typeof s=="string")&&s?s:e;let d;u instanceof File?d=u:d=new File([u],e.name,{type:e.type});const p=d;return p.uid=e.uid,{origin:e,data:l,parsedFile:p,action:a}};post({data:e,origin:r,action:n,parsedFile:s}){if(!this._isMounted)return;const{onStart:o,customRequest:a,name:i,headers:l,withCredentials:u,method:d}=this.props,{uid:p}=r,g=a||Ut,f={action:n,filename:i,data:e,file:s,headers:l,withCredentials:u,method:d||"post",onProgress:m=>{const{onProgress:h}=this.props;h?.(m,s)},onSuccess:(m,h)=>{const{onSuccess:v}=this.props;v?.(m,s,h),delete this.reqs[p]},onError:(m,h)=>{const{onError:v}=this.props;v?.(m,h,s),delete this.reqs[p]}};o(r),this.reqs[p]=g(f,{defaultRequest:Ut})}reset(){this.setState({uid:Ye()})}abort(e){const{reqs:r}=this;if(e){const n=e.uid?e.uid:e;r[n]&&r[n].abort&&r[n].abort(),delete r[n]}else Object.keys(r).forEach(n=>{r[n]&&r[n].abort&&r[n].abort(),delete r[n]})}saveFileInput=e=>{this.fileInput=e};render(){const{component:e,prefixCls:r,className:n,classNames:s={},disabled:o,id:a,name:i,style:l,styles:u={},multiple:d,accept:p,capture:g,children:f,directory:m,openFileDialogOnClick:h,onMouseEnter:v,onMouseLeave:E,hasControlInside:y,...D}=this.props,C=typeof p=="string"?p:p?.format,w=U(r,{[`${r}-disabled`]:o,[n]:n}),b=m?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},P=o?{}:{onClick:h?this.onClick:()=>{},onKeyDown:h?this.onKeyDown:()=>{},onMouseEnter:v,onMouseLeave:E,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:y?void 0:"0"};return Ie.createElement(e,je({},P,{className:w,role:y?void 0:"button",style:l}),Ie.createElement("input",je({},Kr(D,{aria:!0,data:!0}),{id:a,name:i,disabled:o,type:"file",ref:this.saveFileInput,onClick:$=>$.stopPropagation(),key:this.state.uid,style:{display:"none",...u.input},className:s.input,accept:C},b,{multiple:d,onChange:this.onChange},g!=null?{capture:g}:{})),f)}}function ut(){return ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ut.apply(this,arguments)}function Ke(){}let kt=class extends c.Component{static defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:Ke,onError:Ke,onSuccess:Ke,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1};uploader;abort(e){this.uploader.abort(e)}saveUploader=e=>{this.uploader=e};render(){return Ie.createElement(es,ut({},this.props,{ref:this.saveUploader}))}};const ts=t=>{const{componentCls:e,iconCls:r}=t;return{[`${e}-wrapper`]:{[`${e}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:t.colorFillAlter,border:`${Z(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[e]:{padding:t.padding},[`${e}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:t.borderRadiusLG,"&:focus-visible":{outline:`${Z(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`}},[`${e}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${e}-disabled):hover,
          &-hover:not(${e}-disabled)
        `]:{borderColor:t.colorPrimaryHover},[`p${e}-drag-icon`]:{marginBottom:t.margin,[r]:{color:t.colorPrimary,fontSize:t.uploadThumbnailSize}},[`p${e}-text`]:{margin:`0 0 ${Z(t.marginXXS)}`,color:t.colorTextHeading,fontSize:t.fontSizeLG},[`p${e}-hint`]:{color:t.colorTextDescription,fontSize:t.fontSize},[`&${e}-disabled`]:{[`p${e}-drag-icon ${r},
            p${e}-text,
            p${e}-hint
          `]:{color:t.colorTextDisabled}}}}}},rs=t=>{const{componentCls:e,iconCls:r,fontSize:n,lineHeight:s,calc:o}=t,a=`${e}-list-item`,i=`${a}-actions`,l=`${a}-action`;return{[`${e}-wrapper`]:{[`${e}-list`]:{...sr(),lineHeight:t.lineHeight,[a]:{position:"relative",height:o(t.lineHeight).mul(n).equal(),marginTop:t.marginXS,fontSize:n,display:"flex",alignItems:"center",transition:`background-color ${t.motionDurationSlow}`,borderRadius:t.borderRadiusSM,"&:hover":{backgroundColor:t.controlItemBgHover},[`${a}-name`]:{...nr,padding:`0 ${Z(t.paddingXS)}`,lineHeight:s,flex:"auto",transition:`all ${t.motionDurationSlow}`},[i]:{whiteSpace:"nowrap",[l]:{opacity:0},[r]:{color:t.actionsColor,transition:`all ${t.motionDurationSlow}`},[`
              ${l}:focus-visible,
              &.picture ${l}
            `]:{opacity:1}},[`${e}-icon ${r}`]:{color:t.colorIcon,fontSize:n},[`${a}-progress`]:{position:"absolute",bottom:t.calc(t.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:o(n).add(t.paddingXS).equal(),fontSize:n,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${a}:hover ${l}`]:{opacity:1},[`${a}-error`]:{color:t.colorError,[`${a}-name, ${e}-icon ${r}`]:{color:t.colorError},[i]:{[`${r}, ${r}:hover`]:{color:t.colorError},[l]:{opacity:1}}},[`${e}-list-item-container`]:{transition:`opacity ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}}}}},ns=t=>{const{componentCls:e}=t,r=new tt("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),n=new tt("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),s=`${e}-animate-inline`;return[{[`${e}-wrapper`]:{[`${s}-appear, ${s}-enter, ${s}-leave`]:{animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseInOutCirc,animationFillMode:"forwards"},[`${s}-appear, ${s}-enter`]:{animationName:r},[`${s}-leave`]:{animationName:n}}},{[`${e}-wrapper`]:Qr(t)},r,n]},ss=t=>{const{componentCls:e,iconCls:r,uploadThumbnailSize:n,uploadProgressOffset:s,calc:o}=t,a=`${e}-list`,i=`${a}-item`;return{[`${e}-wrapper`]:{[`
        ${a}${a}-picture,
        ${a}${a}-picture-card,
        ${a}${a}-picture-circle
      `]:{[i]:{position:"relative",height:o(n).add(o(t.lineWidth).mul(2)).add(o(t.paddingXS).mul(2)).equal(),padding:t.paddingXS,border:`${Z(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusLG,"&:hover":{background:"transparent"},[`${i}-thumbnail`]:{...nr,width:n,height:n,lineHeight:Z(o(n).add(t.paddingSM).equal()),textAlign:"center",flex:"none",[r]:{fontSize:t.fontSizeHeading2,color:t.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}},[`${i}-progress`]:{bottom:o(t.fontSize).mul(t.lineHeight).div(2).add(s).equal(),width:`calc(100% - ${Z(o(t.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:o(n).add(t.paddingXS).equal()}},[`${i}-error`]:{borderColor:t.colorError,[`${i}-thumbnail ${r}`]:{[`svg path[fill='${xt[0]}']`]:{fill:t.colorErrorBg},[`svg path[fill='${xt.primary}']`]:{fill:t.colorError}}},[`${i}-uploading`]:{borderStyle:"dashed",[`${i}-name`]:{marginBottom:s}}},[`${a}${a}-picture-circle ${i}`]:{[`&, &::before, ${i}-thumbnail`]:{borderRadius:"50%"}}}}},os=t=>{const{componentCls:e,iconCls:r,fontSizeLG:n,colorTextLightSolid:s,calc:o}=t,a=`${e}-list`,i=`${a}-item`,l=t.uploadPicCardSize;return{[`
      ${e}-wrapper${e}-picture-card-wrapper,
      ${e}-wrapper${e}-picture-circle-wrapper
    `]:{...sr(),display:"block",[`${e}${e}-select`]:{width:l,height:l,textAlign:"center",verticalAlign:"top",backgroundColor:t.colorFillAlter,border:`${Z(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[`> ${e}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${e}-disabled):hover`]:{borderColor:t.colorPrimary}},[`${a}${a}-picture-card, ${a}${a}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:t.marginXS,marginInlineEnd:t.marginXS}},"@supports (gap: 1px)":{gap:t.marginXS},[`${a}-item-container`]:{display:"inline-block",width:l,height:l,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[i]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${Z(o(t.paddingXS).mul(2).equal())})`,height:`calc(100% - ${Z(o(t.paddingXS).mul(2).equal())})`,backgroundColor:t.colorBgMask,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'" "'}},[`${i}:hover`]:{[`&::before, ${i}-actions`]:{opacity:1}},[`${i}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${t.motionDurationSlow}`,[`
            ${r}-eye,
            ${r}-download,
            ${r}-delete
          `]:{zIndex:10,width:n,margin:`0 ${Z(t.marginXXS)}`,fontSize:n,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,color:s,"&:hover":{color:s},svg:{verticalAlign:"baseline"}}},[`${i}-thumbnail, ${i}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${i}-name`]:{display:"none",textAlign:"center"},[`${i}-file + ${i}-name`]:{position:"absolute",bottom:t.margin,display:"block",width:`calc(100% - ${Z(o(t.paddingXS).mul(2).equal())})`},[`${i}-uploading`]:{[`&${i}`]:{backgroundColor:t.colorFillAlter},[`&::before, ${r}-eye, ${r}-download, ${r}-delete`]:{display:"none"}},[`${i}-progress`]:{bottom:t.marginXL,width:`calc(100% - ${Z(o(t.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}},[`${e}-wrapper${e}-picture-circle-wrapper`]:{[`${e}${e}-select`]:{borderRadius:"50%"}}}},is=t=>{const{componentCls:e}=t;return{[`${e}-rtl`]:{direction:"rtl"}}},as=t=>{const{componentCls:e,colorTextDisabled:r}=t;return{[`${e}-wrapper`]:{...tr(t),[e]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${e}-select`]:{display:"inline-block"},[`${e}-hidden`]:{display:"none"},[`${e}-disabled`]:{color:r,cursor:"not-allowed"}}}},cs=t=>({actionsColor:t.colorIcon,pictureCardSize:t.controlHeightLG*2.55}),ls=Zt("Upload",t=>{const{fontSizeHeading3:e,marginXS:r,lineWidth:n,pictureCardSize:s,calc:o}=t,a=er(t,{uploadThumbnailSize:o(e).mul(2).equal(),uploadProgressOffset:o(o(r).div(2)).add(n).equal(),uploadPicCardSize:s});return[as(a),ts(a),ss(a),os(a),rs(a),ns(a),is(a),Jr(a)]},cs);function Ce(t){return{...t,lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,uid:t.uid,percent:0,originFileObj:t}}function $e(t,e){const r=Ne(e),n=r.findIndex(({uid:s})=>s===t.uid);return n===-1?r.push(t):r[n]=t,r}function Qe(t,e){const r=t.uid!==void 0?"uid":"name";return e.filter(n=>n[r]===t[r])[0]}function us(t,e){const r=t.uid!==void 0?"uid":"name",n=e.filter(s=>s[r]!==t[r]);return n.length===e.length?null:n}const ds=(t="")=>{const e=t.split("/"),n=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(n)||[""])[0]},cr=t=>t.indexOf("image/")===0,fs=t=>{if(t.type&&!t.thumbUrl)return cr(t.type);const e=t.thumbUrl||t.url||"",r=ds(e);return/^data:image\//.test(e)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(r)?!0:!(/^data:/.test(e)||r)},ce=200;function ps(t){return new Promise(e=>{if(!t.type||!cr(t.type)){e("");return}const r=document.createElement("canvas");r.width=ce,r.height=ce,r.style.cssText=`position: fixed; left: 0; top: 0; width: ${ce}px; height: ${ce}px; z-index: 9999; display: none;`,document.body.appendChild(r);const n=r.getContext("2d"),s=new Image;if(s.onload=()=>{const{width:o,height:a}=s;let i=ce,l=ce,u=0,d=0;o>a?(l=a*(ce/o),d=-(l-i)/2):(i=o*(ce/a),u=-(i-l)/2),n.drawImage(s,u,d,i,l);const p=r.toDataURL();document.body.removeChild(r),window.URL.revokeObjectURL(s.src),e(p)},s.crossOrigin="anonymous",t.type.startsWith("image/svg+xml")){const o=new FileReader;o.onload=()=>{o.result&&typeof o.result=="string"&&(s.src=o.result)},o.readAsDataURL(t)}else if(t.type.startsWith("image/gif")){const o=new FileReader;o.onload=()=>{o.result&&e(o.result)},o.readAsDataURL(t)}else s.src=window.URL.createObjectURL(t)})}const gs=c.forwardRef(({prefixCls:t,className:e,style:r,classNames:n,styles:s,locale:o,listType:a,file:i,items:l,progress:u,iconRender:d,actionIconRender:p,itemRender:g,isImgUrl:f,showPreviewIcon:m,showRemoveIcon:h,showDownloadIcon:v,previewIcon:E,removeIcon:y,downloadIcon:D,extra:C,onPreview:w,onDownload:b,onClose:P},$)=>{const{status:L}=i,[R,k]=c.useState(L);c.useEffect(()=>{L!=="removed"&&k(L)},[L]);const[V,J]=c.useState(!1);c.useEffect(()=>{const X=setTimeout(()=>{J(!0)},300);return()=>{clearTimeout(X)}},[]);const Y=d(i);let O=c.createElement("div",{className:`${t}-icon`},Y);if(a==="picture"||a==="picture-card"||a==="picture-circle")if(R==="uploading"||!i.thumbUrl&&!i.url){const X=U(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:R!=="uploading"});O=c.createElement("div",{className:X},Y)}else{const X=f?.(i)?c.createElement("img",{src:i.thumbUrl||i.url,alt:i.name,className:`${t}-list-item-image`,crossOrigin:i.crossOrigin}):Y,pe=U(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:f&&!f(i)});O=c.createElement("a",{className:pe,onClick:He=>w(i,He),href:i.url||i.thumbUrl,target:"_blank",rel:"noopener noreferrer"},X)}const ee=U(`${t}-list-item`,`${t}-list-item-${R}`,n?.item),ie=typeof i.linkProps=="string"?JSON.parse(i.linkProps):i.linkProps,oe=(typeof h=="function"?h(i):h)?p((typeof y=="function"?y(i):y)||c.createElement(ln,null),()=>P(i),t,o.removeFile,!0):null,z=(typeof v=="function"?v(i):v)&&R==="done"?p((typeof D=="function"?D(i):D)||c.createElement(fn,null),()=>b(i),t,o.downloadFile):null,K=a!=="picture-card"&&a!=="picture-circle"&&c.createElement("span",{key:"download-delete",className:U(`${t}-list-item-actions`,{picture:a==="picture"})},z,oe),Q=typeof C=="function"?C(i):C,B=Q&&c.createElement("span",{className:`${t}-list-item-extra`},Q),F=U(`${t}-list-item-name`),G=i.url?c.createElement("a",{key:"view",target:"_blank",rel:"noopener noreferrer",className:F,title:i.name,...ie,href:i.url,onClick:X=>w(i,X)},i.name,B):c.createElement("span",{key:"view",className:F,onClick:X=>w(i,X),title:i.name},i.name,B),S=(typeof m=="function"?m(i):m)&&(i.url||i.thumbUrl)?c.createElement("a",{href:i.url||i.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:X=>w(i,X),title:o.previewFile},typeof E=="function"?E(i):E||c.createElement(Zr,null)):null,A=(a==="picture-card"||a==="picture-circle")&&R!=="uploading"&&c.createElement("span",{className:`${t}-list-item-actions`},S,R==="done"&&z,oe),{getPrefixCls:M}=c.useContext(or),H=M(),ne=c.createElement("div",{className:ee,style:s?.item},O,G,K,A,V&&c.createElement(ir,{motionName:`${H}-fade`,visible:R==="uploading",motionDeadline:2e3},({className:X})=>{const pe="percent"in i?c.createElement(Vn,{type:"line",percent:i.percent,"aria-label":i["aria-label"],"aria-labelledby":i["aria-labelledby"],...u}):null;return c.createElement("div",{className:U(`${t}-list-item-progress`,X)},pe)})),se=i.response&&typeof i.response=="string"?i.response:i.error?.statusText||i.error?.message||o.uploadError,ae=R==="error"?c.createElement(ar,{title:se,getPopupContainer:X=>X.parentNode},ne):ne;return c.createElement("div",{className:U(`${t}-list-item-container`,e),style:r,ref:$},g?g(ae,i,l,{download:b.bind(null,i),preview:w.bind(null,i),remove:P.bind(null,i)}):ae)}),hs=(t,e)=>{const{listType:r="text",previewFile:n=ps,onPreview:s,onDownload:o,onRemove:a,locale:i,iconRender:l,isImageUrl:u=fs,prefixCls:d,items:p=[],showPreviewIcon:g=!0,showRemoveIcon:f=!0,showDownloadIcon:m=!1,removeIcon:h,previewIcon:v,downloadIcon:E,extra:y,progress:D={size:[-1,2],showInfo:!1},appendAction:C,appendActionVisible:w=!0,itemRender:b,disabled:P,classNames:$,styles:L}=t,[,R]=en(),[k,V]=c.useState(!1),J=["picture-card","picture-circle"].includes(r);c.useEffect(()=>{r.startsWith("picture")&&(p||[]).forEach(S=>{!(S.originFileObj instanceof File||S.originFileObj instanceof Blob)||S.thumbUrl!==void 0||(S.thumbUrl="",n?.(S.originFileObj).then(A=>{S.thumbUrl=A||"",R()}))})},[r,p,n]),c.useEffect(()=>{V(!0)},[]);const Y=(S,A)=>{if(s)return A?.preventDefault(),s(S)},O=S=>{typeof o=="function"?o(S):S.url&&window.open(S.url)},ee=S=>{a?.(S)},ie=S=>{if(l)return l(S,r);const A=S.status==="uploading";if(r.startsWith("picture")){const M=r==="picture"?c.createElement(Rt,null):i.uploading,H=u?.(S)?c.createElement(wn,null):c.createElement(hn,null);return A?M:H}return A?c.createElement(Rt,null):c.createElement(vn,null)},oe=(S,A,M,H,ne)=>{const se={type:"text",size:"small",title:H,onClick:ae=>{A(),c.isValidElement(S)&&S.props.onClick?.(ae)},className:`${M}-list-item-action`,disabled:ne?P:!1};return c.isValidElement(S)?c.createElement(Re,{...se,icon:Nt(S,{...S.props,onClick:()=>{}})}):c.createElement(Re,{...se},c.createElement("span",null,S))};c.useImperativeHandle(e,()=>({handlePreview:Y,handleDownload:O}));const{getPrefixCls:z}=c.useContext(or),K=z("upload",d),Q=z(),B=U(`${K}-list`,`${K}-list-${r}`,$?.list),F=c.useMemo(()=>Pe(tn(Q),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[Q]),G={...J?{}:F,motionDeadline:2e3,motionName:`${K}-${J?"animate-inline":"animate"}`,keys:Ne(p.map(S=>({key:S.uid,file:S}))),motionAppear:k};return c.createElement("div",{className:B,style:L?.list},c.createElement(rn,{...G,component:!1},({key:S,file:A,className:M,style:H})=>c.createElement(gs,{key:S,locale:i,prefixCls:K,className:M,style:H,classNames:$,styles:L,file:A,items:p,progress:D,listType:r,isImgUrl:u,showPreviewIcon:g,showRemoveIcon:f,showDownloadIcon:m,removeIcon:h,previewIcon:v,downloadIcon:E,extra:y,iconRender:ie,actionIconRender:oe,itemRender:b,onPreview:Y,onDownload:O,onClose:ee})),C&&c.createElement(ir,{...G,visible:w,forceRender:!0},({className:S,style:A})=>Nt(C,M=>({className:U(M.className,S),style:{...A,pointerEvents:S?"none":void 0,...M.style}}))))},ms=c.forwardRef(hs),be=`__LIST_IGNORE_${Date.now()}__`,ys=(t,e)=>{const r=xe("upload"),{fileList:n,defaultFileList:s,onRemove:o,showUploadList:a=!0,listType:i="text",onPreview:l,onDownload:u,onChange:d,onDrop:p,previewFile:g,disabled:f,locale:m,iconRender:h,isImageUrl:v,progress:E,prefixCls:y,className:D,type:C="select",children:w,style:b,itemRender:P,maxCount:$,data:L={},multiple:R=!1,hasControlInside:k=!0,action:V="",accept:J="",supportServerRender:Y=!0,rootClassName:O,styles:ee,classNames:ie}=t,oe=c.useContext(zr),z=f??oe,K=t.customRequest||r.customRequest,[Q,B]=nn(s,n),F=Q||[],[G,S]=c.useState("drop"),A=c.useRef(null),M=c.useRef(null);c.useMemo(()=>{const T=Date.now();(n||[]).forEach((j,q)=>{!j.uid&&!Object.isFrozen(j)&&(j.uid=`__AUTO__${T}_${q}__`)})},[n]);const H=(T,j,q)=>{let N=Ne(j),_=!1;$===1?N=N.slice(-1):$&&(_=N.length>$,N=N.slice(0,$)),Pt.flushSync(()=>{B(N)});const le={file:T,fileList:N};q&&(le.event=q),(!_||T.status==="removed"||N.some(we=>we.uid===T.uid))&&Pt.flushSync(()=>{d?.(le)})},ne=async(T,j)=>{const{beforeUpload:q}=t;let N=T;if(q){const _=await q(T,j);if(_===!1)return!1;if(delete T[be],_===be)return Object.defineProperty(T,be,{value:!0,configurable:!0}),!1;typeof _=="object"&&_&&(N=_)}return N},se=T=>{const j=T.filter(_=>!_.file[be]);if(!j.length)return;const q=j.map(_=>Ce(_.file));let N=Ne(F);q.forEach(_=>{N=$e(_,N)}),q.forEach((_,le)=>{let we=_;if(j[le].parsedFile)_.status="uploading";else{const{originFileObj:ge}=_;let ue;try{ue=new File([ge],ge.name,{type:ge.type})}catch{ue=new Blob([ge],{type:ge.type}),ue.name=ge.name,ue.lastModifiedDate=new Date,ue.lastModified=new Date().getTime()}ue.uid=_.uid,we=ue}H(we,N)})},ae=(T,j,q)=>{try{typeof T=="string"&&(T=JSON.parse(T))}catch{}if(!Qe(j,F))return;const N=Ce(j);N.status="done",N.percent=100,N.response=T,N.xhr=q;const _=$e(N,F);H(N,_)},X=(T,j)=>{if(!Qe(j,F))return;const q=Ce(j);q.status="uploading",q.percent=T.percent;const N=$e(q,F);H(q,N,T)},pe=(T,j,q)=>{if(!Qe(q,F))return;const N=Ce(q);N.error=T,N.response=j,N.status="error";const _=$e(N,F);H(N,_)},He=T=>{let j;Promise.resolve(typeof o=="function"?o(T):o).then(q=>{if(q===!1)return;const N=us(T,F);N&&(j={...T,status:"removed"},F?.forEach(_=>{const le=j.uid!==void 0?"uid":"name";_[le]===j[le]&&!Object.isFrozen(_)&&(_.status="removed")}),A.current?.abort(j),H(j,N))})},qe=T=>{S(T.type),T.type==="drop"&&p?.(T)};c.useImperativeHandle(e,()=>({onBatchStart:se,onSuccess:ae,onProgress:X,onError:pe,fileList:F,upload:A.current,nativeElement:M.current}));const{getPrefixCls:Cr,direction:wt,className:$r,style:Or,classNames:Tr,styles:Ir}=xe("upload"),W=Cr("upload",y),xr={...t,listType:i,showUploadList:a,type:C,multiple:R,hasControlInside:k,supportServerRender:Y,disabled:z},[Et,Dt]=rr([Tr,ie],[Ir,ee],{props:xr}),ye={onBatchStart:se,onError:pe,onProgress:X,onSuccess:ae,...t,customRequest:K,data:L,multiple:R,action:V,accept:J,supportServerRender:Y,prefixCls:W,disabled:z,beforeUpload:ne,onChange:void 0,hasControlInside:k};delete ye.className,delete ye.style,(!w||z)&&delete ye.id;const Ct=`${W}-wrapper`,[$t,Nr]=ls(W,Ct),[Pr]=sn("Upload",Br.Upload),{showRemoveIcon:Ot,showPreviewIcon:Rr,showDownloadIcon:Lr,removeIcon:jr,previewIcon:Mr,downloadIcon:Fr,extra:Ar}=typeof a=="boolean"?{}:a,_r=typeof Ot>"u"?!z:Ot,ze=(T,j)=>a?c.createElement(ms,{classNames:Et,styles:Dt,prefixCls:W,listType:i,items:F,previewFile:g,onPreview:l,onDownload:u,onRemove:He,showRemoveIcon:_r,showPreviewIcon:Rr,showDownloadIcon:Lr,removeIcon:jr,previewIcon:Mr,downloadIcon:Fr,iconRender:h,extra:Ar,locale:{...Pr,...m},isImageUrl:v,progress:E,appendAction:T,appendActionVisible:j,itemRender:P,disabled:z}):T,Be=U(Ct,D,O,$t,Nr,$r,Et.root,{[`${W}-rtl`]:wt==="rtl",[`${W}-picture-card-wrapper`]:i==="picture-card",[`${W}-picture-circle-wrapper`]:i==="picture-circle"}),We={...Dt.root},Tt={...Or,...b};if(C==="drag"){const T=U($t,W,`${W}-drag`,{[`${W}-drag-uploading`]:F.some(j=>j.status==="uploading"),[`${W}-drag-hover`]:G==="dragover",[`${W}-disabled`]:z,[`${W}-rtl`]:wt==="rtl"});return c.createElement("span",{className:Be,ref:M,style:We},c.createElement("div",{className:T,style:Tt,onDrop:qe,onDragOver:qe,onDragLeave:qe},c.createElement(kt,{...ye,ref:A,className:`${W}-btn`},c.createElement("div",{className:`${W}-drag-container`},w))),ze())}const Ur=U(W,`${W}-select`,{[`${W}-disabled`]:z,[`${W}-hidden`]:!w}),It=c.createElement("div",{className:Ur,style:Tt},c.createElement(kt,{...ye,ref:A}));return i==="picture-card"||i==="picture-circle"?c.createElement("span",{className:Be,ref:M,style:We},ze(It,!!w)):c.createElement("span",{className:Be,ref:M,style:We},It,ze())},lr=c.forwardRef(ys),vs=c.forwardRef((t,e)=>{const{style:r,height:n,hasControlInside:s=!1,children:o,...a}=t,i={...r,height:n};return c.createElement(lr,{ref:e,hasControlInside:s,...a,style:i,type:"drag"},o)}),gt=lr;gt.Dragger=vs;gt.LIST_IGNORE=be;const bs=c.createContext({dragDropManager:void 0});function te(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Ht=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),qt=function(){return Math.random().toString(36).substring(7).split("").join(".")},zt={INIT:"@@redux/INIT"+qt(),REPLACE:"@@redux/REPLACE"+qt()};function Ss(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ur(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(te(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(te(1));return r(ur)(t,e)}if(typeof t!="function")throw new Error(te(2));var s=t,o=e,a=[],i=a,l=!1;function u(){i===a&&(i=a.slice())}function d(){if(l)throw new Error(te(3));return o}function p(h){if(typeof h!="function")throw new Error(te(4));if(l)throw new Error(te(5));var v=!0;return u(),i.push(h),function(){if(v){if(l)throw new Error(te(6));v=!1,u();var y=i.indexOf(h);i.splice(y,1),a=null}}}function g(h){if(!Ss(h))throw new Error(te(7));if(typeof h.type>"u")throw new Error(te(8));if(l)throw new Error(te(9));try{l=!0,o=s(o,h)}finally{l=!1}for(var v=a=i,E=0;E<v.length;E++){var y=v[E];y()}return h}function f(h){if(typeof h!="function")throw new Error(te(10));s=h,g({type:zt.REPLACE})}function m(){var h,v=p;return h={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(te(11));function D(){y.next&&y.next(d())}D();var C=v(D);return{unsubscribe:C}}},h[Ht]=function(){return this},h}return g({type:zt.INIT}),n={dispatch:g,subscribe:p,getState:d,replaceReducer:f},n[Ht]=m,n}function x(t,e,...r){if(ws()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;n=new Error(e.replace(/%s/g,function(){return r[s++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ws(){return typeof process<"u"&&!0}function Es(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function Ds(t,e){return t.filter(r=>r!==e)}function dr(t){return typeof t=="object"}function Cs(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((o,a)=>{o===1&&s.push(a)}),s}function $s(t,e){return t.filter(r=>e.indexOf(r)>-1)}const ht="dnd-core/INIT_COORDS",Fe="dnd-core/BEGIN_DRAG",mt="dnd-core/PUBLISH_DRAG_SOURCE",Ae="dnd-core/HOVER",_e="dnd-core/DROP",Ue="dnd-core/END_DRAG";function Bt(t,e){return{type:ht,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Os={type:ht,payload:{clientOffset:null,sourceClientOffset:null}};function Ts(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:o,getSourceClientOffset:a}=n,i=t.getMonitor(),l=t.getRegistry();t.dispatch(Bt(o)),Is(r,i,l);const u=Ps(r,i);if(u==null){t.dispatch(Os);return}let d=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");xs(a),d=a(u)}t.dispatch(Bt(o,d));const g=l.getSource(u).beginDrag(i,u);if(g==null)return;Ns(g),l.pinSource(u);const f=l.getSourceType(u);return{type:Fe,payload:{itemType:f,item:g,sourceId:u,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!s}}}}function Is(t,e,r){x(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){x(r.getSource(n),"Expected sourceIds to be registered.")})}function xs(t){x(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ns(t){x(dr(t),"Item must be an object.")}function Ps(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function Rs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ls(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Rs(t,s,r[s])})}return t}function js(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();Ms(n),_s(n).forEach((a,i)=>{const l=Fs(a,i,s,n),u={type:_e,payload:{dropResult:Ls({},r,l)}};t.dispatch(u)})}}function Ms(t){x(t.isDragging(),"Cannot call drop while not dragging."),x(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Fs(t,e,r,n){const s=r.getTarget(t);let o=s?s.drop(n,t):void 0;return As(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function As(t){x(typeof t>"u"||dr(t),"Drop result must either be an object or undefined.")}function _s(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Us(t){return function(){const r=t.getMonitor(),n=t.getRegistry();ks(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:Ue}}}function ks(t){x(t.isDragging(),"Cannot call endDrag while not dragging.")}function dt(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function Hs(t){return function(r,{clientOffset:n}={}){qs(r);const s=r.slice(0),o=t.getMonitor(),a=t.getRegistry(),i=o.getItemType();return Bs(s,a,i),zs(s,o,a),Ws(s,o,a),{type:Ae,payload:{targetIds:s,clientOffset:n||null}}}}function qs(t){x(Array.isArray(t),"Expected targetIds to be an array.")}function zs(t,e,r){x(e.isDragging(),"Cannot call hover while not dragging."),x(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];x(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(s);x(o,"Expected targetIds to be registered.")}}function Bs(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],o=e.getTargetType(s);dt(o,r)||t.splice(n,1)}}function Ws(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function Xs(t){return function(){if(t.getMonitor().isDragging())return{type:mt}}}function Gs(t){return{beginDrag:Ts(t),publishDragSource:Xs(t),hover:Hs(t),drop:js(t),endDrag:Us(t)}}class Vs{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...a)=>{const i=o.apply(e,a);typeof i<"u"&&r(i)}}const s=Gs(this);return Object.keys(s).reduce((o,a)=>{const i=s[a];return o[a]=n(i),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function Ys(t,e){return{x:t.x+e.x,y:t.y+e.y}}function fr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ks(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:fr(Ys(e,n),r)}function Qs(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:fr(e,r)}const Se=[],yt=[];Se.__IS_NONE__=!0;yt.__IS_ALL__=!0;function Js(t,e){return t===Se?!1:t===yt||typeof e>"u"?!0:$s(e,t).length>0}class Zs{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;x(typeof e=="function","listener must be a function."),x(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),i=a.stateId;try{i===s||i===s+1&&!Js(a.dirtyHandlerIds,n)||e()}finally{s=i}};return this.store.subscribe(o)}subscribeToOffsetChange(e){x(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return x(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(x(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return dt(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(x(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();if(o&&!dt(s,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const i=a.indexOf(e);return n?i===a.length-1:i>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ks(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Qs(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const Wt=typeof global<"u"?global:self,pr=Wt.MutationObserver||Wt.WebKitMutationObserver;function gr(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function eo(t){let e=1;const r=new pr(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const to=typeof pr=="function"?eo:gr;class ro{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=to(this.flush),this.requestErrorThrow=gr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class no{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class so{create(e){const r=this.freeTasks,n=r.length?r.pop():new no(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const hr=new ro,oo=new so(hr.registerPendingError);function io(t){hr.enqueueTask(oo.create(t))}const vt="dnd-core/ADD_SOURCE",bt="dnd-core/ADD_TARGET",St="dnd-core/REMOVE_SOURCE",ke="dnd-core/REMOVE_TARGET";function ao(t){return{type:vt,payload:{sourceId:t}}}function co(t){return{type:bt,payload:{targetId:t}}}function lo(t){return{type:St,payload:{sourceId:t}}}function uo(t){return{type:ke,payload:{targetId:t}}}function fo(t){x(typeof t.canDrag=="function","Expected canDrag to be a function."),x(typeof t.beginDrag=="function","Expected beginDrag to be a function."),x(typeof t.endDrag=="function","Expected endDrag to be a function.")}function po(t){x(typeof t.canDrop=="function","Expected canDrop to be a function."),x(typeof t.hover=="function","Expected hover to be a function."),x(typeof t.drop=="function","Expected beginDrag to be a function.")}function ft(t,e){if(e&&Array.isArray(t)){t.forEach(r=>ft(r,!1));return}x(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var re;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(re||(re={}));let go=0;function ho(){return go++}function mo(t){const e=ho().toString();switch(t){case re.SOURCE:return`S${e}`;case re.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Xt(t){switch(t[0]){case"S":return re.SOURCE;case"T":return re.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function Gt(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,o]}=r.next();if(o===e)return!0;n=!!s}while(!n);return!1}class yo{addSource(e,r){ft(e),fo(r);const n=this.addHandler(re.SOURCE,e,r);return this.store.dispatch(ao(n)),n}addTarget(e,r){ft(e,!0),po(r);const n=this.addHandler(re.TARGET,e,r);return this.store.dispatch(co(n)),n}containsHandler(e){return Gt(this.dragSources,e)||Gt(this.dropTargets,e)}getSource(e,r=!1){return x(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return x(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Xt(e)===re.SOURCE}isTargetId(e){return Xt(e)===re.TARGET}removeSource(e){x(this.getSource(e),"Expected an existing source."),this.store.dispatch(lo(e)),io(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){x(this.getTarget(e),"Expected an existing target."),this.store.dispatch(uo(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);x(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){x(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=mo(e);return this.types.set(s,r),e===re.SOURCE?this.dragSources.set(s,n):e===re.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const vo=(t,e)=>t===e;function bo(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function So(t,e,r=vo){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function wo(t=Se,e){switch(e.type){case Ae:break;case vt:case bt:case ke:case St:return Se;case Fe:case mt:case Ue:case _e:default:return yt}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=Cs(r,n);if(!(s.length>0||!So(r,n)))return Se;const a=n[n.length-1],i=r[r.length-1];return a!==i&&(a&&s.push(a),i&&s.push(i)),s}function Eo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Do(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Eo(t,s,r[s])})}return t}const Vt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Co(t=Vt,e){const{payload:r}=e;switch(e.type){case ht:case Fe:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Ae:return bo(t.clientOffset,r.clientOffset)?t:Do({},t,{clientOffset:r.clientOffset});case Ue:case _e:return Vt;default:return t}}function $o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function he(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){$o(t,s,r[s])})}return t}const Oo={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function To(t=Oo,e){const{payload:r}=e;switch(e.type){case Fe:return he({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case mt:return he({},t,{isSourcePublic:!0});case Ae:return he({},t,{targetIds:r.targetIds});case ke:return t.targetIds.indexOf(r.targetId)===-1?t:he({},t,{targetIds:Ds(t.targetIds,r.targetId)});case _e:return he({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Ue:return he({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Io(t=0,e){switch(e.type){case vt:case bt:return t+1;case St:case ke:return t-1;default:return t}}function xo(t=0){return t+1}function No(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Po(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){No(t,s,r[s])})}return t}function Ro(t={},e){return{dirtyHandlerIds:wo(t.dirtyHandlerIds,{type:e.type,payload:Po({},e.payload,{prevTargetIds:Es(t,"dragOperation.targetIds",[])})}),dragOffset:Co(t.dragOffset,e),refCount:Io(t.refCount,e),dragOperation:To(t.dragOperation,e),stateId:xo(t.stateId)}}function Lo(t,e=void 0,r={},n=!1){const s=jo(n),o=new Zs(s,new yo(s)),a=new Vs(s,o),i=t(a,e,r);return a.receiveBackend(i),a}function jo(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return ur(Ro,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Mo(t,e){if(t==null)return{};var r=Fo(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fo(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let Yt=0;const Te=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Ao=c.memo(function(e){var{children:r}=e,n=Mo(e,["children"]);const[s,o]=_o(n);return c.useEffect(()=>{if(o){const a=mr();return++Yt,()=>{--Yt===0&&(a[Te]=null)}}},[]),I.jsx(bs.Provider,{value:s,children:r})});function _o(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Uo(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Uo(t,e=mr(),r,n){const s=e;return s[Te]||(s[Te]={dragDropManager:Lo(t,e,r,n)}),s[Te]}function mr(){return typeof global<"u"?global:window}function yr(t){let e=null;return()=>(e==null&&(e=t()),e)}function ko(t,e){return t.filter(r=>r!==e)}function Ho(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const s=[];return r.forEach(o=>s.push(o)),s}class qo{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=Ho(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=ko(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class zo{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const vr="__NATIVE_FILE__",br="__NATIVE_URL__",Sr="__NATIVE_TEXT__",wr="__NATIVE_HTML__",Kt=Object.freeze(Object.defineProperty({__proto__:null,FILE:vr,HTML:wr,TEXT:Sr,URL:br},Symbol.toStringTag,{value:"Module"}));function Je(t,e,r){const n=e.reduce((s,o)=>s||t.getData(o),"");return n??r}const pt={[vr]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[wr]:{exposeProperties:{html:(t,e)=>Je(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[br]:{exposeProperties:{urls:(t,e)=>Je(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Sr]:{exposeProperties:{text:(t,e)=>Je(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Bo(t,e){const r=pt[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new zo(r);return n.loadDataTransfer(e),n}function Ze(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(pt).filter(r=>{const n=pt[r];return n?.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const Wo=yr(()=>/firefox/i.test(navigator.userAgent)),Er=yr(()=>!!window.safari);class Qt{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:o,c3s:a}=this;let i=r.length-1;if(e===r[i])return n[i];let l=0,u=a.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));const f=r[d];if(f<e)l=d+1;else if(f>e)u=d-1;else return n[d]}i=Math.max(0,u);const p=e-r[i],g=p*p;return n[i]+s[i]*p+o[i]*g+a[i]*p*g}constructor(e,r){const{length:n}=e,s=[];for(let f=0;f<n;f++)s.push(f);s.sort((f,m)=>e[f]<e[m]?-1:1);const o=[],a=[];let i,l;for(let f=0;f<n-1;f++)i=e[f+1]-e[f],l=r[f+1]-r[f],o.push(i),a.push(l/i);const u=[a[0]];for(let f=0;f<o.length-1;f++){const m=a[f],h=a[f+1];if(m*h<=0)u.push(0);else{i=o[f];const v=o[f+1],E=i+v;u.push(3*E/((E+v)/m+(E+i)/h))}}u.push(a[a.length-1]);const d=[],p=[];let g;for(let f=0;f<u.length-1;f++){g=a[f];const m=u[f],h=1/o[f],v=m+u[f+1]-g-g;d.push((g-m-v)*h),p.push(v*h*h)}this.xs=e,this.ys=r,this.c1s=u,this.c2s=d,this.c3s=p}}const Xo=1;function Dr(t){const e=t.nodeType===Xo?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function Oe(t){return{x:t.clientX,y:t.clientY}}function Go(t){var e;return t.nodeName==="IMG"&&(Wo()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Vo(t,e,r,n){let s=t?e.width:r,o=t?e.height:n;return Er()&&t&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:o}}function Yo(t,e,r,n,s){const o=Go(e),i=Dr(o?t:e),l={x:r.x-i.x,y:r.y-i.y},{offsetWidth:u,offsetHeight:d}=t,{anchorX:p,anchorY:g}=n,{dragPreviewWidth:f,dragPreviewHeight:m}=Vo(o,e,u,d),h=()=>{let b=new Qt([0,.5,1],[l.y,l.y/d*m,l.y+m-d]).interpolate(g);return Er()&&o&&(b+=(window.devicePixelRatio-1)*m),b},v=()=>new Qt([0,.5,1],[l.x,l.x/u*f,l.x+f-u]).interpolate(p),{offsetX:E,offsetY:y}=s,D=E===0||E,C=y===0||y;return{x:D?E:v(),y:C?y:h()}}class Ko{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function Qo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Qo(t,s,r[s])})}return t}class Jo{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=a=>this.handleDragEnter(a,e),s=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return Jt({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return Jt({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Kt).some(r=>Kt[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Bo(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&Dr(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=Oe(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:i}=s,l=Ze(i);if(this.monitor.isDragging()){if(i&&typeof i.setDragImage=="function"){const d=this.monitor.getSourceId(),p=this.sourceNodes.get(d),g=this.sourcePreviewNodes.get(d)||p;if(g){const{anchorX:f,anchorY:m,offsetX:h,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),D=Yo(p,g,a,{anchorX:f,anchorY:m},{offsetX:h,offsetY:v});i.setDragImage(g,D.x,D.y)}}try{i?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(i&&!i.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:i}=s,l=Ze(i);l&&this.beginDragNativeItem(l,i)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Oe(s)}),o.some(i=>this.monitor.canDropOnTarget(i))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Oe(s),this.scheduleHover(o),(o||[]).some(i=>this.monitor.canDropOnTarget(i))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;s.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Ze(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Oe(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))},this.options=new Ko(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new qo(this.isNodeInDocument)}}const Zo=function(e,r,n){return new Jo(e,r,n)},ni=()=>{const[t,e]=c.useState("models"),[r,n]=c.useState([]),[s,o]=c.useState(!1),[a,i]=c.useState(null),[l,u]=c.useState(null),[d,p]=c.useState(null),[g,f]=c.useState(!1),[m,h]=c.useState(null),[v,E]=c.useState(""),[y,D]=c.useState(null);c.useEffect(()=>{(async()=>{o(!0);try{const $={models:"model",environments:"scene",clothing:"garment"}[t]||"model",L=await Ee.get(`/materials/presets?category=${$}`);n(L.data)}catch(P){console.error("Failed to fetch materials:",P)}finally{o(!1)}})()},[t]);const C=async b=>{const{file:P,onSuccess:$,onError:L}=b,R=new FormData;R.append("file",P),R.append("type","garment");try{const k=await Ee.post("/materials/upload",R);p(k.data.url),de.success(""),$?.(k.data)}catch(k){L?.(k),de.error("")}},w=async()=>{if(!a||!l||!d){de.warning("");return}f(!0),D(null);try{const b=await Ee.post("/generate/",{garment_url:d,model_id:a.id,scene_id:l.id,prompt:`Generating ${a.name} in ${l.name}`});h(b.data._id||b.data.id),E(b.data.status),de.success("")}catch(b){console.error(b),de.error(""),f(!1)}};return c.useEffect(()=>{if(!m)return;const P=setInterval(async()=>{try{const $=await Ee.get(`/generate/${m}`),{status:L,result_url:R,error_message:k}=$.data;E(L),L==="COMPLETED"?(D(R),f(!1),h(null),de.success("")):L==="FAILED"&&(f(!1),h(null),de.error(`: ${k}`))}catch($){console.error($)}},2e3);return()=>clearInterval(P)},[m]),I.jsx(Ao,{backend:Zo,children:I.jsxs(Lt,{gutter:24,children:[I.jsx(Xe,{span:8,children:I.jsxs(De,{title:"",bordered:!1,style:{height:"calc(100vh - 120px)",overflowY:"auto"},children:[I.jsxs(Ge,{activeKey:t,onChange:e,children:[I.jsx(Ge.TabPane,{tab:""},"models"),I.jsx(Ge.TabPane,{tab:""},"environments")]}),s?I.jsx("div",{style:{textAlign:"center",padding:20},children:I.jsx(Wr,{})}):I.jsx(Lt,{gutter:[16,16],children:r.map(b=>I.jsx(Xe,{span:12,children:I.jsx(De,{hoverable:!0,cover:I.jsx("img",{alt:b.name,src:b.url,style:{height:120,objectFit:"cover"}}),onClick:()=>{t==="models"&&i(b),t==="environments"&&u(b)},style:{borderColor:a?.id===b.id||l?.id===b.id?"#1890ff":"#f0f0f0",borderWidth:a?.id===b.id||l?.id===b.id?2:1},children:I.jsx(De.Meta,{title:b.name})})},b.id))})]})}),I.jsx(Xe,{span:16,children:I.jsxs(De,{title:"",bordered:!1,style:{height:"calc(100vh - 120px)",overflowY:"auto"},children:[I.jsxs("div",{style:{marginBottom:24,padding:24,border:"2px dashed #d9d9d9",borderRadius:8,textAlign:"center"},children:[I.jsx("h3",{children:"1. "}),I.jsx(gt,{customRequest:C,showUploadList:!1,children:d?I.jsx("img",{src:d,alt:"Garment",style:{maxHeight:200,maxWidth:"100%"}}):I.jsx(Re,{icon:I.jsx(Cn,{}),children:""})})]}),I.jsxs("div",{style:{marginBottom:24},children:[I.jsx("h3",{children:"2. "}),I.jsxs("p",{children:[I.jsx("strong",{children:":"})," ",a?.name||""]}),I.jsxs("p",{children:[I.jsx("strong",{children:":"})," ",l?.name||""]})]}),I.jsx(Re,{type:"primary",size:"large",icon:I.jsx(on,{}),onClick:w,loading:g,disabled:!a||!l||!d,block:!0,children:g?` (${v})`:""}),y&&I.jsxs("div",{style:{marginTop:24,textAlign:"center"},children:[I.jsx("h3",{children:""}),I.jsx("img",{src:y,alt:"Result",style:{maxWidth:"100%",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})]})})]})})};export{ni as default};
